main {
	background-color: $white;

	section {
		padding: $padding-md;
	}

	header {
		@include flex-column-centered;
	  margin-bottom: $padding-sm;

	  .subtitle {
	  	text-align: center;
	  }
	}

  .header-text {
		text-align: center;

    h1 {
	    margin-bottom: 1em;
	    line-height: normal;
	    font-size: 2em;
	    font-family: $font-family-sans-serif;
	    font-weight: $font-weight-bold;
    }
  }

  .image-container {
		@include flex-column-centered;
    margin-top: 3em;

		.image {
			flex-grow: 1;
		  max-width: 740px;

		  img {
		  	width: 100%;
		  	height: auto;
		  }
		}

		.lines {
			@include flex-column-centered;
	    position: absolute;
	    z-index: 0;
		}

		.bg-line {
			height: 1.2em;
			transition: width 1s ease-in-out;
			width: 0;
			background-color: $gray;
			margin-bottom: 8px;

	    &.expand {
	    	width: 100vw;
	    }

	    &.green {
				background-color: $p2pu-green;
	    }

	    &.orange {
				background-color: $p2pu-orange;
	    }

	    &.yellow {
				background-color: $p2pu-yellow;
	    }

	    &.blue {
				background-color: $p2pu-blue;
	    }
		}
  }

	section#landing {
		@include flex-column-centered;
		min-height: 90vh;
		padding: $padding-sm 0;
	}

	section#learning-circles {
		.overview {
			margin-bottom: $padding-sm;

      .container {
      	display: flex;

				#stats {
					flex-grow: 1;

					.card {
						@include flex-column-centered;

						h4 {
							padding: $padding-sm 0;
							font-family: $font-family-sans-serif;
						}

						.material-icons {
							font-size: 5em;
							cursor: default;
						}

						.stat {
							text-align: center;

							.number {
								font-weight: bold;
							}

							.text {
								margin-left: 6px;
							}
						}

						p {
							text-align: center;
						}

						&:nth-of-type(4n+1) {
			        .material-icons {
			          color: $p2pu-green;
			        }
				    }

				    &:nth-of-type(4n+2) {
			        .material-icons {
			          color: $p2pu-yellow;
			        }
				    }

				    &:nth-of-type(4n+3) {
			        .material-icons {
			          color: $p2pu-orange;
			        }
				    }
					}
				}
      }
		}
	}

	section#upcoming-meetings {
    padding: 0;
    background-color: $gray-lighter;

    .preview-container {
    	padding: $padding-sm 0;
    	display: flex;
			width: 100%;


    	.meetings-section {
		    padding-left: $padding-sm;
		    padding-right: $padding-sm;
		    padding-top: $padding-sm;
		    width: 100%;

	    	.meetings {
	    		.meeting-card {
	    			.content {
							.date {
								color: $p2pu-blue;
								text-transform: uppercase;
						    font-size: $font-size-sm;
						    display: flex;
						    align-items: center;
						    margin-bottom: $padding-xs;

						    p {
						    	margin-bottom: 0;
						    }

						    i {
						    	margin-right: 6px;
						    }
							}

							.info {
								color: $gray-darker;

								.title {
									font-size: bold;
								}

								.location {
									font-size: $font-size-sm;
								}

								.bold {
						    	font-weight: bold
						    }
							}
	    			}
	    		}
	    	}
    	}
    }
	}

	section#call-to-action {
		margin-bottom: $padding-lg;
		padding: 0;

		.background-image {
			background: url('../images/cta_bg.jpg') no-repeat center center;
			background-size: cover;
			padding: $padding-md;
		}

		.block {
			display: flex;
			justify-content: center;
			margin-top: $padding-sm;
			margin-bottom: $padding-sm;
		}

		.circle {
			padding: $padding-md;
			border-radius: 999px;
			background-color: $white;
			height: 90vw;
			width: 90vw;
			max-height: 300px;
	    max-width: 300px;
	    display: flex;
	    justify-content: center;
	    align-items: center;
		  transition: box-shadow 0.4s ease-in-out;

			&.create {
				box-shadow: 0px 0px 0px 0px $p2pu-yellow;

				&:hover {
					box-shadow: 0px 0px 0px 10px $p2pu-yellow;
				}

				i.material-icons {
					color: $p2pu-yellow;
				}
			}

			&.join {
				box-shadow: 0px 0px 0px 0px $p2pu-green;

				&:hover {
					box-shadow: 0px 0px 0px 10px $p2pu-green;
				}

				i.material-icons {
					color: $p2pu-green;
				}
			}

			.content {
				text-align: center;

				p {
					padding-top: $padding-xs;
					padding-bottom: $padding-xs;
				}

				i.material-icons {
					font-size: 4em;
				}
			}
		}
	}

	#testimonials {
		margin-bottom: $padding-md;

		.slide-container {
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-items: center;
		}

		.slide {
			display: flex;
			justify-content: center;
			align-content: flex-start;
			width: 680px;
			margin: 6px;

			&:focus {
				outline: none;
			}

			.slick-slide:not(.slick-current) {
				cursor: pointer;
			}

			.testimonial-card {
				transition: all 0.4s ease-in-out;
				transform: scale(0.8);
				background: $gray-lighter;
				border-radius: 20px;
				box-shadow: -1px 1px 3px 1px rgba(0,0,0,0.1);
				display: flex;
				flex-direction: column;
				padding: $padding-md;
				z-index: 0;

				.quote {
					margin: $padding-sm;
				}

				.attribution {
					display: flex;
					align-items: center;
			    justify-content: center;

					.image {
						height: 100px;
						width: 100px;
						margin-right: $padding-sm;

						img {
							border-radius: 50%;
							height: 100%;
							width: 100%;
						}
					}

					.text {
						.name {
							font-weight: 700;
							padding-bottom: 6px;
						}

						.organization {
							font-size: $font-size-sm;
						}
					}
				}
			}

			&.slick-current.slick-active.slick-center {
				.testimonial-card {
					transform: scale(1);
					background: white;
					z-index: 1;
				}
			}
		}
	}

	section#about {
		color: $white;

		.header-text {
			h1 {
				margin-bottom: $padding-xs;
			}

			p.large {
				margin-bottom: $padding-md;
			}
		}

		.columns {
			margin-right: 0;
			margin-left: 0;
			display: flex;
	    align-items: stretch;

			.column {
				margin-bottom: $padding-md;
		    display: flex;
		    flex-direction: column;
		    justify-content: space-between;

				p {
					padding-bottom: $padding-xs;
				}
			}
		}
	}

	section#partners-and-funders {
		.partners {
			display: flex;
	    flex-wrap: wrap;
	    align-items: center;

			> div {
				text-align: center;
				margin-bottom: $padding-sm;
			}
		}

		.funders {
	    padding: $padding-md;

	    .funder {
	    	display: flex;
	    	align-items: center;
	    	justify-content: center;

		    img {
		    	max-width: 200px;
		    	filter: grayscale(1);
		    }
	    }
		}
	}
}

.join-cta {
	@include flex-column-centered;
	padding: $padding-sm;
}

.background-yellow {
	background-color: $p2pu-yellow;
}

.background-green {
	background-color: $p2pu-green;
}

.background-blue {
	background-color: $p2pu-blue;
}

.background-orange {
	background-color: $p2pu-orange;
}

.background-dark {
	background-color: $gray-darker;
}

.row {
	margin-right: 0 !important;
	margin-left: 0 !important;
}

#map-section {
	.container {
		position: relative;
	}
}

#global-map {
  height: 420px;
}

.marker {
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background-color: $gray-darker;
  cursor: default;

  &.year2019 {
  	background-color: $p2pu-orange;
  }

  &.year2018 {
  	background-color: $p2pu-yellow;
  }

  &.year2017 {
  	background-color: $p2pu-green;
  }

  &.year2016 {
  	background-color: $p2pu-blue;
  }

  &.with-popup {
    cursor: pointer;
    background-color: $p2pu-orange;
    width: 15px;
    height: 15px;
  }
}

.map-overlay {
  position: absolute;
  bottom: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.8);
  margin-right: 20px;
  overflow: auto;
  border-radius: 3px;
}

#legend {
  padding: 10px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  line-height: 18px;
  margin-bottom: 40px;
  width: 100px;
}

.legend-key {
  display: inline-block;
  border-radius: 20%;
  width: 10px;
  height: 10px;
  margin-right: 5px;

  &.year2019 {
  	background-color: $p2pu-orange;
  }

  &.year2018 {
  	background-color: $p2pu-yellow;
  }

  &.year2017 {
  	background-color: $p2pu-green;
  }

  &.year2016 {
  	background-color: $p2pu-blue;
  }
}

@media (max-width: map-get($grid-breakpoints, "md")) {
	body {
		font-size: $font-size-base;
	}

	main {
		section {
			padding: 4px;

			header {
				margin: 12px 4px;
			}
		}

		section#landing {
			#header-text-carousel {
				height: 200px;
			}
		}

		section#learning-circles {
			.overview {
				margin-top: $padding-sm;
				flex-direction: column;

				.container {
					flex-direction: column;

					#stats {
						.card {
							margin-bottom: $padding-sm;

							h4 {
								padding: 0;
							}
						}
					}
				}
			}
		}

		#preview {
			.preview-container {
				flex-direction: column;
			}
		}

		#testimonials {
			.slide {
				width: 95vw;

				.testimonial-card {
					padding: 10px;

					.attribution {
						flex-direction: column;
						text-align: center;

						.image {
							margin-right: 0;
						}
					}
				}
			}
		}

		section#about {
			.columns {
				display: block;
			}
		}

		section#partners-and-funders {
			.funders {
				padding: $padding-sm;
				.funder {
					img {
						max-width: 160px;
					}
				}
			}
		}
	}

	.hidden-on-mobile {
		display: none !important;
	}
}

@media (min-width: map-get($grid-breakpoints, "sm")) and (max-width: map-get($grid-breakpoints, "md")) {
	main {
		section {
			padding: $padding-sm;

			header {
				margin: 12px 4px;
			}
		}
	}
}

@media (max-width: map-get($grid-breakpoints, "sm")) {
	section#learning-circles {
		.overview {
			#stats {
				.stacked-numbers {
					flex-direction: column;
				}
			}
		}
	}

	main {
		.header-text {
			h1 {
				font-size: 1.8em;
			}
		}
	}
}

@-webkit-keyframes blink {
  0% {
    opacity: 1; }
  50% {
    opacity: 0; }
  100% {
    opacity: 1; }
}

@keyframes blink {
  0% {
    opacity: 1; }
  50% {
    opacity: 0; }
  100% {
    opacity: 1; }
}

.Typist .Cursor--blinking {
  opacity: 1;
  animation: blink 1s linear infinite;
}

.image, .background-image {
	position: relative;

	.caption {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    background: transparentize(black, 0.5);
    color: white;
    padding: 5px 15px;
    text-align: left;
	}
}

